# 🌐 브라우저 기반 코딩 & 테스트 가이드

> Cursor/AntiGravity에서 AI가 브라우저를 직접 조작하며 테스트하는 방법

---

## 📋 목차

1. [브라우저 기반 코딩이란?](#1-브라우저-기반-코딩이란)
2. [MCP Browser 설정](#2-mcp-browser-설정)
3. [AI에게 테스트 요청하기](#3-ai에게-테스트-요청하기)
4. [실전 예시](#4-실전-예시)
5. [자동 테스트 워크플로우](#5-자동-테스트-워크플로우)

---

## 1. 브라우저 기반 코딩이란?

### 🤖 AI가 브라우저를 직접 조작합니다

전통적인 방식:
```
개발자 → 코드 작성 → 브라우저 새로고침 → 수동 확인 → 버그 발견 → 다시 코드 수정
```

AI 브라우저 기반:
```
개발자 → AI에게 요청 → AI가 코드 작성 → AI가 브라우저 열어서 자동 테스트 → 버그 자동 수정
```

### 🎯 이 프로젝트의 MCP Browser 설정

프로젝트에는 이미 두 가지 브라우저 도구가 설정되어 있습니다:

```
mcps/
├── cursor-ide-browser/          # Cursor 전용 브라우저 제어
│   └── tools/
│       ├── browser_navigate.json
│       ├── browser_click.json
│       ├── browser_snapshot.json
│       └── ...
└── cursor-browser-extension/    # 브라우저 확장 기반
    └── tools/
        └── ...
```

---

## 2. MCP Browser 설정

### 🔧 Cursor에서 MCP Browser 활성화

#### 방법 1: 자동 활성화 (이미 설정됨!)

프로젝트를 열면 Cursor가 자동으로 `.cursor/settings.json` 또는 MCP 설정을 읽습니다.

**확인 방법:**
```
Cursor → Settings → Extensions → MCP Servers
→ cursor-ide-browser 활성화 확인
```

#### 방법 2: 수동 설정 (필요시)

**1. Cursor Settings 열기**
```
Ctrl+, (Cmd+,) → "MCP" 검색
```

**2. MCP Server 추가**
```json
{
  "mcpServers": {
    "cursor-ide-browser": {
      "command": "npx",
      "args": ["-y", "@cursor/mcp-server-browser"],
      "env": {}
    }
  }
}
```

**3. Cursor 재시작**

### 🔍 설정 확인

AI에게 물어보기:
```
"브라우저 제어 기능이 활성화되어 있어?"
```

AI 응답 예시:
```
네, cursor-ide-browser MCP 서버가 활성화되어 있습니다.
다음 기능을 사용할 수 있습니다:
- browser_navigate: 페이지 이동
- browser_click: 요소 클릭
- browser_snapshot: 화면 캡처
- ...
```

---

## 3. AI에게 테스트 요청하기

### 🎯 기본 테스트 Prompt

#### 패턴 1: 개발 + 자동 테스트
```
"캐릭터 검색 기능을 추가하고 브라우저에서 테스트해줘:

기능:
- 검색창 추가
- 실시간 필터링
- 대소문자 구분 없음

테스트 시나리오:
1. 개발 서버 실행
2. 브라우저로 localhost:5173 접속
3. 검색창에 '담뫄' 입력
4. 결과 1개 나오는지 확인
5. '아크' 검색하면 해당 직업 캐릭터만 나오는지 확인
6. 빈 검색어면 전체 목록 보이는지 확인"
```

#### 패턴 2: 기존 기능 테스트
```
"현재 메인 페이지를 브라우저에서 테스트해줘:

확인할 것:
- 캐릭터 카드 9개가 3x3 그리드로 표시되는지
- 각 카드 클릭 시 멤버 상세 페이지로 이동하는지
- 모바일 크기(375px)에서도 잘 보이는지
- 헤더 메뉴 버튼 클릭 시 사이드바 열리는지

스크린샷도 찍어줘."
```

#### 패턴 3: 버그 재현 + 수정
```
"이미지 저장 기능이 모바일에서 작동하지 않는다고 하는데,
브라우저로 재현해보고 원인 찾아서 수정해줘:

재현 방법:
1. localhost:5173/member/char-1/save 접속
2. 모바일 뷰로 전환 (375px)
3. '저장하기' 버튼 클릭
4. 이미지가 다운로드되는지 확인

에러가 있으면 콘솔 로그도 확인해줘."
```

### 📝 테스트 Prompt 템플릿

```
"[기능명]을 개발하고 브라우저 테스트해줘:

개발 요구사항:
- [요구사항 1]
- [요구사항 2]

테스트 시나리오:
1. [단계 1]
2. [단계 2]
3. [단계 3]

확인할 것:
- [ ] [체크 포인트 1]
- [ ] [체크 포인트 2]
- [ ] [체크 포인트 3]

문제가 있으면 자동으로 수정해줘."
```

---

## 4. 실전 예시

### 예시 1: 새 기능 개발 + 테스트

**Prompt:**
```
"멤버 상세 페이지에 '공유하기' 버튼을 추가하고 테스트해줘:

위치: src/routes/member/[id]/+page.svelte
기능: 클릭하면 현재 URL을 클립보드에 복사

테스트:
1. npm run dev 실행 (이미 실행 중이면 스킵)
2. 브라우저로 /member/char-1 접속
3. '공유하기' 버튼 찾기
4. 버튼 클릭
5. URL이 클립보드에 복사되었는지 확인
6. 성공 토스트 메시지 표시되는지 확인

모바일(375px)과 데스크톱(1920px) 둘 다 확인해줘."
```

**AI의 작업 흐름:**
```
1. ✅ 코드 작성 (ShareButton 컴포넌트)
2. ✅ 페이지에 통합
3. 🌐 브라우저 열기 (localhost:5173/member/char-1)
4. 🖱️ '공유하기' 버튼 클릭
5. 📋 클립보드 내용 확인
6. ✅ 토스트 메시지 확인
7. 📱 모바일 뷰로 전환
8. 🔄 다시 테스트
9. 📸 스크린샷 첨부
10. ✅ 완료 보고
```

### 예시 2: 반응형 테스트

**Prompt:**
```
"메인 페이지의 캐릭터 그리드가 다양한 화면 크기에서 잘 보이는지 테스트해줘:

테스트할 해상도:
- 모바일: 320px, 375px, 414px
- 태블릿: 768px, 1024px
- 데스크톱: 1280px, 1920px

각 해상도에서 확인:
- 그리드 열 개수가 적절한가?
- 카드가 잘리거나 넘치지 않는가?
- 간격이 일정한가?
- 스크롤이 부드러운가?

문제가 있으면 Tailwind 클래스 수정해서 해결해줘.
각 해상도별 스크린샷도 찍어줘."
```

### 예시 3: E2E 사용자 시나리오

**Prompt:**
```
"사용자 시나리오를 처음부터 끝까지 테스트해줘:

시나리오: 캐릭터 메생결산 보기
1. 메인 페이지 접속
2. '담뫄' 캐릭터 카드 클릭
3. 멤버 상세 페이지로 이동 확인
4. 메생결산 목록에서 첫 번째 아이템 클릭
5. 상세 모달 열림 확인
6. 이미지가 제대로 표시되는지 확인
7. 닫기 버튼으로 모달 닫기
8. '저장' 버튼 클릭
9. 이미지 저장 페이지로 이동
10. '저장하기' 버튼 클릭
11. PNG 파일 다운로드 확인

각 단계마다 스크린샷 찍고,
문제가 있으면 멈추고 보고해줘."
```

### 예시 4: 성능 테스트

**Prompt:**
```
"메인 페이지 로딩 성능을 측정해줘:

측정할 것:
- 초기 로딩 시간
- First Contentful Paint (FCP)
- Largest Contentful Paint (LCP)
- Time to Interactive (TTI)
- 번들 크기

브라우저 개발자 도구의 Lighthouse를 실행하고
점수가 90점 미만이면 개선 방법 제안해줘."
```

---

## 5. 자동 테스트 워크플로우

### 🔄 개발 → 테스트 → 수정 자동화

#### 워크플로우 Prompt
```
"다음 워크플로우를 자동으로 실행해줘:

1. 개발 단계:
   - 캐릭터 검색 컴포넌트 생성
   - 메인 페이지에 통합

2. 테스트 단계:
   - 브라우저로 자동 테스트
   - 검색 기능 동작 확인
   - 모바일 반응형 확인

3. 검증 단계:
   - 타입 에러 없는지 확인 (npm run check)
   - Linter 통과하는지 확인
   
4. 문제 발견 시:
   - 자동으로 수정
   - 다시 테스트
   - 통과할 때까지 반복

5. 완료 후:
   - 스크린샷 첨부
   - 변경 사항 요약
   - 커밋 메시지 제안"
```

### 📋 PR 생성 전 자동 체크리스트

```
"PR 올리기 전에 다음을 자동으로 확인해줘:

1. 코드 품질:
   - [ ] TypeScript 에러 없음
   - [ ] Linter 통과
   - [ ] 사용하지 않는 import 제거
   - [ ] console.log 제거

2. 기능 테스트:
   - [ ] 요구사항 모두 구현됨
   - [ ] 에러 케이스 처리됨
   - [ ] 로딩 상태 표시됨

3. 반응형:
   - [ ] 모바일(375px) 확인
   - [ ] 태블릿(768px) 확인
   - [ ] 데스크톱(1920px) 확인

4. 브라우저 테스트:
   - [ ] 모든 기능 동작 확인
   - [ ] 콘솔 에러 없음
   - [ ] 네트워크 에러 없음

각 항목을 브라우저로 확인하고
문제가 있으면 자동으로 수정해줘."
```

---

## 6. MCP Browser 주요 명령어

### 🛠️ AI가 사용하는 브라우저 도구들

#### browser_navigate
```typescript
// 페이지 이동
browser_navigate({ url: "http://localhost:5173" })
```

#### browser_snapshot
```typescript
// 화면 캡처 (DOM 구조 포함)
browser_snapshot()
```

#### browser_click
```typescript
// 요소 클릭
browser_click({ selector: ".character-card:first-child" })
```

#### browser_type
```typescript
// 텍스트 입력
browser_type({ 
  selector: "input[type='search']", 
  text: "담뫄" 
})
```

#### browser_scroll
```typescript
// 스크롤
browser_scroll({ direction: "down", amount: 500 })
```

#### browser_evaluate
```typescript
// JavaScript 실행
browser_evaluate({ 
  script: "return document.title" 
})
```

---

## 7. 테스트 시나리오 예시

### 🎯 테스트 케이스 라이브러리

프로젝트에 자주 쓰는 테스트 시나리오를 저장해두세요:

```typescript
// tests/scenarios.md

## 메인 페이지
- [ ] 캐릭터 카드 9개 표시
- [ ] 3x3 그리드 레이아웃
- [ ] 카드 클릭 시 상세 페이지 이동
- [ ] 헤더 메뉴 동작
- [ ] 사이드바 열기/닫기

## 멤버 상세 페이지
- [ ] 캐릭터 정보 표시
- [ ] 메생결산 목록 표시
- [ ] 아이템 클릭 시 상세 모달
- [ ] 저장 버튼 동작

## 반응형
- [ ] 모바일: 1열 또는 2열
- [ ] 태블릿: 2열 또는 3열
- [ ] 데스크톱: 3열
```

**사용법:**
```
"tests/scenarios.md의 '메인 페이지' 테스트를 
브라우저로 자동 실행해줘"
```

---

## 8. 디버깅 팁

### 🐛 문제 해결

#### AI가 브라우저를 열지 못할 때
```
"브라우저 제어 기능 상태 확인해줘"
```

#### 테스트 실패 시
```
"브라우저 콘솔 에러를 확인하고
에러 메시지 전체를 보여줘"
```

#### 스크린샷이 필요할 때
```
"현재 화면 스크린샷 찍어줘"
```

#### 요소를 찾지 못할 때
```
"페이지의 모든 버튼 요소를 나열해줘"
```

---

## 9. 고급 활용

### 🚀 자동화 스크립트

#### 배포 전 체크
```
"배포 전 전체 테스트를 실행해줘:

1. 프로덕션 빌드 (npm run build)
2. 빌드 결과 미리보기 (npm run preview)
3. 모든 페이지 접속 확인:
   - /
   - /member/char-1
   - /member/char-1/save
   - /msg/msg-1
   - /talk
4. 각 페이지에서:
   - 콘솔 에러 없음
   - 네트워크 에러 없음
   - 레이아웃 깨짐 없음
5. Lighthouse 점수 측정
6. 모든 문제 해결

완료되면 배포 가능 여부 보고해줘."
```

#### 회귀 테스트
```
"지난 PR에서 수정한 부분이 
다른 곳에 영향을 주지 않았는지 
브라우저로 확인해줘:

변경된 파일:
- CharacterCard.svelte

테스트 범위:
- CharacterCard를 사용하는 모든 페이지
- 메인 페이지
- 검색 결과 페이지

예상 동작과 다르면 보고해줘."
```

---

## 10. 체크리스트

### ✅ 개발 전
- [ ] MCP Browser 활성화 확인
- [ ] 개발 서버 실행 중
- [ ] 테스트 시나리오 준비

### ✅ 개발 중
- [ ] 코드 작성 후 즉시 브라우저 테스트
- [ ] 에러 발견 시 AI에게 자동 수정 요청
- [ ] 반응형 테스트

### ✅ PR 전
- [ ] 전체 시나리오 테스트
- [ ] 다양한 해상도 확인
- [ ] 콘솔 에러 제거
- [ ] 스크린샷 첨부

---

## 🎓 학습 자료

- [MCP (Model Context Protocol) 문서](https://modelcontextprotocol.io/)
- [Playwright 문서](https://playwright.dev/) (비슷한 개념)
- [Puppeteer 문서](https://pptr.dev/) (비슷한 개념)

---

## 💡 팁

1. **구체적으로 요청하기**
   ```
   ❌ "테스트해줘"
   ✅ "메인 페이지를 브라우저로 열어서 캐릭터 카드가 9개 표시되는지 확인해줘"
   ```

2. **스크린샷 적극 활용**
   ```
   "각 단계마다 스크린샷 찍어줘"
   ```

3. **문제 발견 시 자동 수정**
   ```
   "문제가 있으면 멈추지 말고 자동으로 수정해서 다시 테스트해줘"
   ```

4. **테스트 결과 저장**
   ```
   "테스트 결과를 tests/results/[날짜].md 파일로 저장해줘"
   ```

---

**브라우저 기반 코딩으로 개발 속도를 10배 높이세요! 🚀**
